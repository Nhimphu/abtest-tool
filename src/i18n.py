# i18n.py

i18n = {
    "RU": {
        "title": "Ультимативный Инструмент A/B Тестирования",
        "baseline_conversion": "Баз. конверсия (%):",
        "baseline": "Базовая конверсия:",
        "expected_effect": "Ож. эффект (%):",
        "uplift": "Ож. эффект:",
        "significance_level": "Уровень знач. (α):",
        "alpha": "α:",
        "power": "Мощность (1-β):",
        "users_a": "A - Пользователи:",
        "conv_a": "A - Конверсии:",
        "users_b": "B - Пользователи:",
        "conv_b": "B - Конверсии:",
        "users_c": "C - Пользователи:",
        "conv_c": "C - Конверсии:",
        "calculate_sample_size": "Рассчитать",
        "analyze_ab": "Анализ A/B/n",
        "confidence_intervals": "Дов. интервалы",
        "bayesian_analysis": "Байес. анализ",
        "aa_testing": "A/A Тест",
        "sequential_testing": "Послед. анализ",
        "clear_results": "Очистить",
        "pre_exp_data": "Загрузить пред. данные",
        "calculate_roi": "Рассчитать ROI",
        "save_plot": "Сохранить график",
        "switch_lang": "🌐",
        "power_curve": "Кривая размера выборки",
        "bootstrap": "Бутстрап",
        "export_hist_csv": "Экспорт истории CSV",
        "export_hist_xl": "Экспорт истории Excel",
        "tutorial": "Туториал",
        "delete_selected": "Удалить выбранное",
        "clear_history": "Очистить всё",
        "history": "История",
        "main": "Главная",
        "revenue_per_user": "Доход на пользователя",
        "traffic_cost": "Стоимость трафика",
        "budget": "Бюджет",
        "obrien_fleming": "O'Brien-Fleming",
        "file": "Файл",
        "export_pdf": "Экспорт PDF",
        "export_excel": "Экспорт Excel",
        "export_csv": "Экспорт CSV",
        "expected_fpr": "Ожидаемая ошибка I рода",
        "actual_fpr": "Фактическая ошибка I рода",
        "splitting_correct": "Сплитование корректно",
        "check_splitting": "Проверьте сплитование",
        "significant": "Значимо",
        "not_significant": "Не значимо",
        "winner": "Победитель",
        "early_stopping": "Раннее завершение",
        "no_result": "Нет результата",
        "interpretation": "Интерпретация",
        "roi_result": "Результат ROI",
        "add_data_source": "Добавить источник",
        "data_source_type": "Тип",
        "project": "Проект",
        "credentials": "Файл ключа",
        "host": "Хост",
        "port": "Порт",
        "database": "База",
        "user": "Пользователь",
        "password": "Пароль",
        "test_connection": "Проверить подключение",
        "conn_ok": "Успешное подключение",
        "conn_fail": "Ошибка подключения",
        "tooltip.baseline": "Базовая конверсия",
        "tooltip.uplift": "Ожидаемый uplift варианта",
        "tooltip.alpha": "Уровень значимости",
        "tooltip.power": "Статистическая мощность",
        "tooltip.calc": "Рассчитать размер выборки",
        "tooltip.analyze": "Запустить A/B/n тест",
        "tooltip.confidence": "Построить доверительные интервалы",
        "tooltip.bayesian": "Выполнить байесовский анализ",
        "tooltip.aa": "Запустить A/A симуляцию",
        "tooltip.sequential": "Выполнить последовательный анализ",
        "tooltip.obf": "Анализ O'Brien-Fleming",
        "tooltip.revenue_per_user": "Доход на пользователя",
        "tooltip.traffic_cost": "Стоимость трафика на пользователя",
        "tooltip.budget": "Доступный бюджет",
        "tooltip.roi": "Рассчитать ROI",
        "tooltip.plot_ci": "График доверительных интервалов",
        "tooltip.plot_power": "Кривая требуемого объёма",
        "tooltip.plot_alpha": "График расхода альфы",
        "tooltip.plot_bootstrap": "Распределение бутстрапа",
        "tooltip.save_plot": "Сохранить последний график",
        "tooltip.load_pre_exp": "Загрузить предэкспериментальные данные",
        "tooltip.clear": "Очистить результаты",
        "tooltip.delete_selected": "Удалить выбранные строки истории",
        "tooltip.clear_history": "Очистить всю историю",
    },
    "EN": {
        "title": "Ultimate A/B Testing Tool",
        "baseline_conversion": "Base Conversion (%):",
        "baseline": "Baseline:",
        "expected_effect": "Expected Effect (%):",
        "uplift": "Expected uplift:",
        "significance_level": "Significance Level (α):",
        "alpha": "α:",
        "power": "Power (1-β):",
        "users_a": "A - Users:",
        "conv_a": "A - Conversions:",
        "users_b": "B - Users:",
        "conv_b": "B - Conversions:",
        "users_c": "C - Users:",
        "conv_c": "C - Conversions:",
        "calculate_sample_size": "Calculate",
        "analyze_ab": "A/B/n Analysis",
        "confidence_intervals": "Confidence Intervals",
        "bayesian_analysis": "Bayesian Analysis",
        "aa_testing": "A/A Test",
        "sequential_testing": "Sequential Analysis",
        "clear_results": "Clear",
        "pre_exp_data": "Load Pre-exp Data",
        "calculate_roi": "Calculate ROI",
        "save_plot": "Save Plot",
        "switch_lang": "🌐",
        "power_curve": "Sample Size Curve",
        "bootstrap": "Bootstrap",
        "export_hist_csv": "Export history CSV",
        "export_hist_xl": "Export history Excel",
        "tutorial": "Tutorial",
        "delete_selected": "Delete Selected",
        "clear_history": "Clear All",
        "history": "History",
        "main": "Main",
        "revenue_per_user": "Revenue per user",
        "traffic_cost": "Traffic cost",
        "budget": "Budget",
        "obrien_fleming": "O'Brien-Fleming",
        "file": "File",
        "export_pdf": "Export PDF",
        "export_excel": "Export Excel",
        "export_csv": "Export CSV",
        "expected_fpr": "Expected FPR",
        "actual_fpr": "Actual FPR",
        "splitting_correct": "Splitting correct",
        "check_splitting": "Check splitting",
        "significant": "Significant",
        "not_significant": "Not significant",
        "winner": "Winner",
        "early_stopping": "Early stopping",
        "no_result": "No result",
        "interpretation": "Interpretation",
        "roi_result": "ROI Result",
        "add_data_source": "Add Data Source",
        "data_source_type": "Type",
        "project": "Project",
        "credentials": "Credentials",
        "host": "Host",
        "port": "Port",
        "database": "Database",
        "user": "User",
        "password": "Password",
        "test_connection": "Test Connection",
        "conn_ok": "Connection successful",
        "conn_fail": "Connection failed",
        "tooltip.baseline": "Baseline conversion rate",
        "tooltip.uplift": "Expected uplift of variant",
        "tooltip.alpha": "Significance level",
        "tooltip.power": "Statistical power",
        "tooltip.calc": "Calculate sample size",
        "tooltip.analyze": "Run A/B/n test",
        "tooltip.confidence": "Plot confidence intervals",
        "tooltip.bayesian": "Run Bayesian analysis",
        "tooltip.aa": "Run A/A simulation",
        "tooltip.sequential": "Run sequential analysis",
        "tooltip.obf": "Run O'Brien-Fleming analysis",
        "tooltip.revenue_per_user": "Revenue per user",
        "tooltip.traffic_cost": "Traffic cost per user",
        "tooltip.budget": "Available budget",
        "tooltip.roi": "Calculate ROI",
        "tooltip.plot_ci": "Confidence intervals plot",
        "tooltip.plot_power": "Required sample size curve",
        "tooltip.plot_alpha": "Alpha spending plot",
        "tooltip.plot_bootstrap": "Bootstrap distribution",
        "tooltip.save_plot": "Save last plot",
        "tooltip.load_pre_exp": "Load pre-experiment data",
        "tooltip.clear": "Clear results",
        "tooltip.delete_selected": "Delete selected history rows",
        "tooltip.clear_history": "Clear all history",
    },
}


def detect_language() -> str:
    """Return 'RU' if OS locale starts with ru, else 'EN'."""
    import locale

    loc, _ = locale.getlocale()
    loc = loc or ""
    return "RU" if str(loc).lower().startswith("ru") else "EN"
